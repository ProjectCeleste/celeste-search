<cis-shell [id]="blueprint.id" [name]="blueprint.name" type="Blueprint" [rarity]="blueprint.rarity"
  [icon]="blueprint.icon" sprite="blueprints" [description]="blueprint.description" [vendors]="blueprint.vendors"
  [marketplace]="blueprint.marketplace">

  <!-- COST -->
  <ng-container *ngIf="blueprint.materials?.length > 0">
    <ng-container *ngIf="(materials | async) as materials">

      <div class="__recipe">
        <div class="row --source">
          Cost:
        </div>
        <div class="row --materials">
          <ng-container *ngFor="let ref of blueprint.materials">
            <ng-container *ngIf="materials[ref.id] as mat">
              <span class="icon--materials-sm icon--materials-sm--{{ mat.icon }}"></span>
              <span class="__mat-amount">{{ ref.quantity }}</span>
              <span class="--{{ mat.rarity }}">{{ mat.name }}</span>
              <span></span><!-- wrap line -->
              <span></span><!-- wrap line -->
              <span></span><!-- wrap line -->
              <span></span><!-- wrap line -->
            </ng-container>
          </ng-container>
        </div>
      </div>

    </ng-container>
  </ng-container>

  <!-- QUEST, EVENT -->
  <div *ngIf="blueprint.event">
    <div class="row --source">
      <span>Reward from:</span>
    </div>

    <div class="row --materials">
      <span class="icon--materials-sm icon--materials-sm--{{ blueprint.event?.name || 'quest' }}"></span>
      <span *ngIf="blueprint.event">
        {{ blueprint.event!.name | titlecase }} Event
        <!-- <span *ngIf="blueprint.event.year">{{ blueprint.event!.year }}</span> -->
      </span>
    </div>
  </div>

  <!-- LOOT TABLE -->
  <div *ngIf="blueprint.lootTable">
    <div class="row --loot-table">
      <span class="icon--materials-sm icon--materials-sm--{{ blueprint.lootTable.replace(' ', '_') }}"></span>
      <span *ngIf="blueprint.lootTable">
        Exclusive to <strong>{{ blueprint.lootTable | titlecase }}</strong>
      </span>
    </div>
  </div>

</cis-shell>