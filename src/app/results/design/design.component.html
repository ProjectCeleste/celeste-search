<cis-shell [id]="design.id" [type]="design.school" [rarity]="design.rarity" sprite="designs" [vendors]="design.vendors"
  [marketplace]="design.marketplace">

  <!-- NAME -->
  <div class="row --name">
    <div class="icon--designs icon--designs--{{ design.outputIcon }}"></div>
    <div class="icon--designs icon--designs--{{ design.icon }} __icon"></div>
    <div class="__name --{{ design.rarity }}">
      Recipe: {{ design.outputName }}
    </div>
  </div>

  <!-- DESCRIPTION -->
  <div *ngIf="design.description" class="row --description --positive">
    {{ design.description }}
  </div>

  <!-- COST -->
  <ng-container *ngIf="design.materials?.length > 0">
    <ng-container *ngIf="(materials | async) as materials">

      <div class="__recipe">
        <div class="row --source">
          Cost:
        </div>
        <div class="row --materials">
          <ng-container *ngFor="let ref of design.materials">
            <ng-container *ngIf="materials[ref.id] as mat">
              <span class="icon--materials icon--materials--{{ mat.icon }}"></span>
              <span class="__mat-amount">{{ ref.quantity }}</span>
              <span class="--{{ mat.rarity }}">{{ mat.name }}</span>
              <span></span><!-- wrap line -->
              <span></span><!-- wrap line -->
              <span></span><!-- wrap line -->
              <span></span><!-- wrap line -->
            </ng-container>
          </ng-container>
        </div>
      </div>

    </ng-container>
  </ng-container>

  <!-- LOOT TABLE -->
  <div *ngIf="design.lootTable">
    <div class="row --loot-table">
      <span class="icon--materials icon--materials--{{ design.lootTable.replace(' ', '_') }}"></span>
      <span *ngIf="design.lootTable">
        Exclusive to {{ design.lootTable | titlecase }}
      </span>
    </div>
  </div>

</cis-shell>